//
//  VVSystemKey.m
//  VirtualView
//
//  Copyright (c) 2017 Alibaba. All rights reserved.
//

#import "VVSystemKey.h"
#import <UIKit/UIKit.h>
static VVSystemKey* _shareInstance;
@interface VVSystemKey ()
{
    NSDictionary* _originalCodeDic;
    NSMutableDictionary* _dynamicCodeDic;
}
@end

@implementation VVSystemKey
+ (VVSystemKey*)shareInstance{
    if (_shareInstance == nil) {
        _shareInstance = [[VVSystemKey alloc] init];
    }
    return _shareInstance;
}

- (id)init{
    self = [super init];
    if (self) {
        NSString* path = [[NSBundle mainBundle] pathForResource:@"widgetCodeList" ofType:@"plist"];
        _originalCodeDic = [NSDictionary dictionaryWithContentsOfFile:path];
        _dynamicCodeDic = [[NSMutableDictionary alloc] initWithDictionary:_originalCodeDic];
        _keyArray = @[
            @"action",
            @"actionParam",
            @"alignContent",
            @"alignItems",
            @"alignSelf",
            @"alpha",
            @"ancestor",
            @"animatorTime",
            @"autoDimDirection",
            @"autoDimX",
            @"autoDimY",
            @"autoRefreshThreshold",
            @"autoSwitch",
            @"autoSwitchTime",
            @"background",
            @"backgroundImage",
            @"blurRadius",
            @"borderColor",
            @"borderRadius",
            @"borderBottomLeftRadius",
            @"borderBottomRightRadius",
            @"borderTopLeftRadius",
            @"borderTopRightRadius",
            @"borderWidth",
            @"canSlide",
            @"children",
            @"ck",
            @"class",
            @"colCount",
            @"color",
            @"Component",
            @"Container",
            @"containerID",
            @"dashEffect",
            @"data",
            @"dataMode",
            @"dataParam",
            @"dataTag",
            @"dataUrl",
            @"diameterX",
            @"diameterY",
            @"disableCache",
            @"disablePlaceHolder",
            @"do",
            @"ellipsize",
            @"else",
            @"elseif",
            @"filterWhiteBg",
            @"firstSpace",
            @"fixBy",
            @"flag",
            @"flexBasis",
            @"flexDirection",
            @"flexFlow",
            @"flexGrow",
            @"FlexLayout",
            @"flexShrink",
            @"flexWrap",
            @"for",
            @"gravity",
            @"height",
            @"id",
            @"if",
            @"initValue",
            @"itemHeight",
            @"itemHorizontalMargin",
            @"itemMargin",
            @"itemVerticalMargin",
            @"itemWidth",
            @"justifyContent",
            @"lastSpace",
            @"layoutDirection",
            @"layoutGravity",
            @"layoutRatio",
            @"lines",
            @"lineSpace",
            @"lineSpaceExtra",
            @"lineSpaceMultiplier",
            @"List",
            @"marginBottom",
            @"marginLeft",
            @"marginRight",
            @"marginTop",
            @"maskColor",
            @"maxLines",
            @"minHeight",
            @"minWidth",
            @"mode",
            @"module",
            @"name",
            @"NVImageView",
            @"NVLineView",
            @"NVTextView",
            @"onAfterDataLoad",
            @"onAutoRefresh",
            @"onBeforeDataLoad",
            @"onClick",
            @"onLongClick",
            @"onPageFlip",
            @"onScroll",
            @"onSetData",
            @"order",
            @"orientation",
            @"paddingBottom",
            @"paddingLeft",
            @"paddingRight",
            @"paddingTop",
            @"paintStyle",
            @"paintWidth",
            @"parent",
            @"pos",
            @"Progress",
            @"ratio",
            @"RatioLayout",
            @"scaleType",
            @"Scroller",
            @"self",
            @"siblings",
            @"size",
            @"span",
            @"src",
            @"stayTime",
            @"style",
            @"supportHTMLStyle",
            @"supportSticky",
            @"text",
            @"textColor",
            @"textSize",
            @"textStyle",
            @"this",
            @"TMImage",
            @"TMVImage",
            @"type",
            @"typeface",
            @"uuid",
            @"var",
            @"VGraph",
            @"VH",
            @"visibility",
            @"VLine",
            @"vList",
            @"VTime",
            @"VVFrameLayout",
            @"VVGridLayout",
            @"VVGridView",
            @"VVImageView",
            @"VVNavtiveViewContainer",
            @"VVPageView",
            @"VVSliderView",
            @"VVTextView",
            @"VVVH2Layout",
            @"VVVHLayout",
            @"waterfall",
            @"while",
            @"width"
        ];
        _keyDictionary = @{
            @"-1422950858" : @"action",
            @"1569332215" : @"actionParam",
            @"-752601676" : @"alignContent",
            @"-1063257157" : @"alignItems",
            @"1767100401" : @"alignSelf",
            @"92909918" : @"alpha",
            @"-973829677" : @"ancestor",
            @"1347692116" : @"animatorTime",
            @"-1422893274" : @"autoDimDirection",
            @"1438248735" : @"autoDimX",
            @"1438248736" : @"autoDimY",
            @"-51356769" : @"autoRefreshThreshold",
            @"-380157501" : @"autoSwitch",
            @"78802736" : @"autoSwitchTime",
            @"-1332194002" : @"background",
            @"1292595405" : @"backgroundImage",
            @"-1428201511" : @"blurRadius",
            @"722830999" : @"borderColor",
            @"1349188574" : @"borderRadius",
            @"581268560" : @"borderBottomLeftRadius",
            @"588239831" : @"borderBottomRightRadius",
            @"-1228066334" : @"borderTopLeftRadius",
            @"333432965" : @"borderTopRightRadius",
            @"741115130" : @"borderWidth",
            @"-137744447" : @"canSlide",
            @"1659526655" : @"children",
            @"3176" : @"ck",
            @"94742904" : @"class",
            @"-669528209" : @"colCount",
            @"94842723" : @"color",
            @"604060893" : @"Component",
            @"1593011297" : @"Container",
            @"207632732" : @"containerID",
            @"1037639619" : @"dashEffect",
            @"3076010" : @"data",
            @"1788852333" : @"dataMode",
            @"-377785597" : @"dataParam",
            @"1443184528" : @"dataTag",
            @"1443186021" : @"dataUrl",
            @"1360592235" : @"diameterX",
            @"1360592236" : @"diameterY",
            @"-1012322950" : @"disableCache",
            @"-1358064245" : @"disablePlaceHolder",
            @"3211" : @"do",
            @"1554823821" : @"ellipsize",
            @"3116345" : @"else",
            @"-1300156394" : @"elseif",
            @"617472950" : @"filterWhiteBg",
            @"-172008394" : @"firstSpace",
            @"97444684" : @"fixBy",
            @"3145580" : @"flag",
            @"-1783760955" : @"flexBasis",
            @"-975171706" : @"flexDirection",
            @"1743704263" : @"flexFlow",
            @"1743739820" : @"flexGrow",
            @"-1477040989" : @"FlexLayout",
            @"1031115618" : @"flexShrink",
            @"1744216035" : @"flexWrap",
            @"101577" : @"for",
            @"280523342" : @"gravity",
            @"1557524721" : @"height",
            @"3355" : @"id",
            @"3357" : @"if",
            @"-266541503" : @"initValue",
            @"1671241242" : @"itemHeight",
            @"2129234981" : @"itemHorizontalMargin",
            @"1810961057" : @"itemMargin",
            @"196203191" : @"itemVerticalMargin",
            @"2146088563" : @"itemWidth",
            @"1860657097" : @"justifyContent",
            @"2002099216" : @"lastSpace",
            @"-1955718283" : @"layoutDirection",
            @"516361156" : @"layoutGravity",
            @"1999032065" : @"layoutRatio",
            @"102977279" : @"lines",
            @"-1807275662" : @"lineSpace",
            @"-1118334530" : @"lineSpaceExtra",
            @"-667362093" : @"lineSpaceMultiplier",
            @"2368702" : @"List",
            @"1481142723" : @"marginBottom",
            @"1248755103" : @"marginLeft",
            @"62363524" : @"marginRight",
            @"-2037919555" : @"marginTop",
            @"-77812777" : @"maskColor",
            @"390232059" : @"maxLines",
            @"-133587431" : @"minHeight",
            @"-1375815020" : @"minWidth",
            @"3357091" : @"mode",
            @"-1068784020" : @"module",
            @"3373707" : @"name",
            @"-1991132755" : @"NVImageView",
            @"74403170" : @"NVLineView",
            @"74637979" : @"NVTextView",
            @"-251005427" : @"onAfterDataLoad",
            @"173466317" : @"onAutoRefresh",
            @"361078798" : @"onBeforeDataLoad",
            @"-1351902487" : @"onClick",
            @"71235917" : @"onLongClick",
            @"-665970021" : @"onPageFlip",
            @"1490730380" : @"onScroll",
            @"-974184371" : @"onSetData",
            @"106006350" : @"order",
            @"-1439500848" : @"orientation",
            @"202355100" : @"paddingBottom",
            @"-1501175880" : @"paddingLeft",
            @"713848971" : @"paddingRight",
            @"90130308" : @"paddingTop",
            @"789757939" : @"paintStyle",
            @"793104392" : @"paintWidth",
            @"-995424086" : @"parent",
            @"111188" : @"pos",
            @"-936434099" : @"Progress",
            @"108285963" : @"ratio",
            @"-2105120011" : @"RatioLayout",
            @"-1877911644" : @"scaleType",
            @"-337520550" : @"Scroller",
            @"3526476" : @"self",
            @"166965745" : @"siblings",
            @"3530753" : @"size",
            @"3536714" : @"span",
            @"114148" : @"src",
            @"1322318022" : @"stayTime",
            @"109780401" : @"style",
            @"506010071" : @"supportHTMLStyle",
            @"-977844584" : @"supportSticky",
            @"3556653" : @"text",
            @"-1063571914" : @"textColor",
            @"-1003668786" : @"textSize",
            @"-1048634236" : @"textStyle",
            @"3559070" : @"this",
            @"-2005645978" : @"TMImage",
            @"-1776612770" : @"TMVImage",
            @"3575610" : @"type",
            @"-675792745" : @"typeface",
            @"3601339" : @"uuid",
            @"116519" : @"var",
            @"-1763797352" : @"VGraph",
            @"2738" : @"VH",
            @"1941332754" : @"visibility",
            @"81791338" : @"VLine",
            @"111344180" : @"vList",
            @"82029635" : @"VTime",
            @"1310765783" : @"VVFrameLayout",
            @"-1822277072" : @"VVGridLayout",
            @"2228070" : @"VVGridView",
            @"-1762099547" : @"VVImageView",
            @"1010" : @"VVNavtiveViewContainer",
            @"2479791" : @"VVPageView",
            @"-1815780095" : @"VVSliderView",
            @"82026147" : @"VVTextView",
            @"-494312694" : @"VVVH2Layout",
            @"1302701180" : @"VVVHLayout",
            @"-213632750" : @"waterfall",
            @"113101617" : @"while",
            @"2003872956" : @"width"
        };
        _rate = [UIScreen mainScreen].bounds.size.width/750;
    }
    return self;
}

- (NSString*)classNameForIndex:(NSUInteger)index{
    NSString* className=[_dynamicCodeDic objectForKey:[NSString stringWithFormat:@"%lu",(unsigned long)index]];
    return className?className:@"";
}

- (NSString*)classNameForTag:(NSString*)tag{
    NSString* className=[_dynamicCodeDic objectForKey:tag];
    return className?className:@"";
}

- (void)registerWidget:(NSString*)className withIndex:(NSUInteger)index{
    [_dynamicCodeDic setObject:className forKey:[NSString stringWithFormat:@"%zd", index]];
}
@end
